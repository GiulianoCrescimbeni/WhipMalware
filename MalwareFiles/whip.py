import socket
import thread

def response(clientsocket):
    while True:
        data = clientsocket.recv(1024)
        print(data)
    clientsocket.close()

def on_new_client(clientsocket):
    while True:
        command = raw_input("Send Command-> ")
        clientsocket.sendall(command)
        thread.start_new_thread(response, (c,))
    clientsocket.close()

s = socket.socket()
host = socket.gethostname()
port = 5005

print('Whip started!')

s.bind((host, port))
s.listen(1)

while True:
   c, addr = s.accept()
   print("Slave Connected")
   thread.start_new_thread(on_new_client,(c,))
s.close()